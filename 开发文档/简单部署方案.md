# G-Asset Forge 简单部署方案

## 📋 **部署策略选择**

基于目前项目是**桌面应用**的特点，推荐以下3种简单部署方案：

### 🥇 **方案1：本地打包分发** (推荐)
```bash
# 适合：小团队内部使用，快速上线
特点：
- ✅ 无需服务器运维
- ✅ 安装包直接分发
- ✅ 成本最低，部署最简单
```

### 🥈 **方案2：内网共享部署**
```bash  
# 适合：企业内网环境
特点：
- ✅ 中心化管理
- ✅ 共享素材库
- ✅ 统一版本控制
```

### 🥉 **方案3：轻量云端部署**
```bash
# 适合：需要远程访问
特点：
- ✅ 随时随地访问
- ✅ 自动备份
- ✅ 扩展性好
```

---

## 🚀 **方案1：本地打包分发** (重点推荐)

### 1.1 打包配置
```json
// package.json
{
  "main": "dist/main.js",
  "scripts": {
    "build": "tsc && electron-builder",
    "build:win": "electron-builder --win",
    "build:mac": "electron-builder --mac",
    "dist": "npm run build"
  },
  "build": {
    "appId": "com.company.g-asset-forge",
    "productName": "G-Asset Forge",
    "directories": {
      "output": "release"
    },
    "files": [
      "dist/**/*",
      "assets/**/*"
    ],
    "win": {
      "target": "nsis",
      "icon": "assets/icon.ico"
    },
    "mac": {
      "target": "dmg",
      "icon": "assets/icon.icns"
    },
    "nsis": {
      "oneClick": false,
      "allowToChangeInstallationDirectory": true
    }
  }
}
```

### 1.2 一键打包脚本
```bash
#!/bin/bash
# build-and-distribute.sh

echo "🔨 开始构建G-Asset Forge安装包..."

# 1. 清理之前的构建
rm -rf dist/ release/

# 2. 安装依赖
echo "📦 安装依赖..."
npm ci

# 3. 构建应用
echo "🏗️ 构建应用..."
npm run build

# 4. 打包不同平台
echo "📱 打包Windows版本..."
npm run build:win

echo "🍎 打包macOS版本..."
npm run build:mac

echo "✅ 构建完成！安装包位置："
echo "  Windows: release/G-Asset Forge Setup.exe"
echo "  macOS: release/G-Asset Forge.dmg"

# 5. 可选：上传到文件服务器
# echo "☁️ 上传到内网文件服务器..."
# scp release/*.* user@server:/path/to/downloads/
```

### 1.3 分发流程
```typescript
// 分发检查清单
const DISTRIBUTION_CHECKLIST = {
  "构建前检查": [
    "✅ 代码已提交到版本控制",
    "✅ 版本号已更新",
    "✅ 功能测试通过",
    "✅ 图标和资源文件就位"
  ],
  
  "打包检查": [
    "✅ Windows安装包正常",
    "✅ macOS安装包正常", 
    "✅ 文件大小合理 (<100MB)",
    "✅ 安装测试通过"
  ],
  
  "分发方式": [
    "📧 邮件发送安装包",
    "💾 U盘/移动硬盘拷贝",
    "🌐 内网文件服务器下载",
    "☁️ 百度云/腾讯云分享"
  ]
};
```

---

## 🏢 **方案2：内网共享部署**

### 2.1 服务器配置
```bash
# 最小服务器要求
CPU: 2核心
内存: 4GB
硬盘: 100GB
系统: Ubuntu 20.04 LTS / CentOS 8

# 软件环境
Node.js >= 18.0.0
PM2 (进程管理)
Nginx (反向代理)
```

### 2.2 部署脚本
```bash
#!/bin/bash
# deploy-internal.sh

SERVER_IP="192.168.1.100"  # 内网服务器IP
APP_DIR="/opt/g-asset-forge"

echo "🚀 部署到内网服务器: $SERVER_IP"

# 1. 构建应用
echo "🔨 构建应用..."
npm run build

# 2. 上传文件
echo "📤 上传文件到服务器..."
rsync -avz --delete dist/ user@$SERVER_IP:$APP_DIR/

# 3. 远程启动服务
echo "🌟 启动服务..."
ssh user@$SERVER_IP "cd $APP_DIR && pm2 restart g-asset-forge || pm2 start app.js --name g-asset-forge"

echo "✅ 部署完成！"
echo "🌐 访问地址: http://$SERVER_IP:3000"
```

### 2.3 Nginx配置
```nginx
# /etc/nginx/sites-available/g-asset-forge
server {
    listen 80;
    server_name 192.168.1.100;  # 内网IP
    
    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    
    # 静态文件服务
    location /assets/ {
        root /opt/g-asset-forge/public;
        expires 30d;
    }
}
```

---

## ☁️ **方案3：轻量云端部署**

### 3.1 免费/低成本平台推荐
```typescript
const CLOUD_PLATFORMS = {
  "Vercel": {
    price: "免费版足够使用",
    features: ["自动部署", "CDN加速", "域名绑定"],
    command: "npx vercel --prod"
  },
  
  "Railway": {
    price: "$5/月起",
    features: ["数据库托管", "自动扩容", "监控告警"],
    deployment: "GitHub自动部署"
  },
  
  "腾讯云轻量服务器": {
    price: "24元/月",
    specs: "1核2G 40GB SSD",
    suitable: "国内用户访问快"
  }
};
```

### 3.2 Vercel一键部署
```bash
# 1. 安装Vercel CLI
npm i -g vercel

# 2. 项目配置
# vercel.json
{
  "name": "g-asset-forge",
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ]
}

# 3. 部署命令
vercel --prod
```

---

## 📊 **部署方案对比**

| 方案 | 成本 | 复杂度 | 适用场景 | 推荐指数 |
|------|------|--------|----------|----------|
| **本地打包** | 💰 免费 | ⭐ 简单 | 小团队试用 | ⭐⭐⭐⭐⭐ |
| **内网部署** | 💰💰 低 | ⭐⭐ 中等 | 企业内部 | ⭐⭐⭐⭐ |
| **云端部署** | 💰💰💰 中 | ⭐⭐⭐ 中等 | 远程协作 | ⭐⭐⭐ |

---

## 🎯 **立即行动方案**

### 第1阶段：快速验证 (1-2天)
```bash
# 本地打包测试
npm install electron electron-builder
npm run build
npm run build:win
```

### 第2阶段：团队试用 (3-5天)
```bash
# 分发给3-5个用户测试
# 收集反馈和BUG
# 快速迭代修复
```

### 第3阶段：正式部署 (根据需要)
```bash
# 根据试用反馈选择最合适的部署方案
# 如果团队满意本地版本，继续使用
# 如果需要协作功能，考虑内网或云端部署
```

---

## ⚡ **一键快速部署脚本**

```bash
#!/bin/bash
# quick-deploy.sh - 选择性部署脚本

echo "🚀 G-Asset Forge 快速部署向导"
echo "请选择部署方式："
echo "1) 本地打包 (推荐初次使用)"
echo "2) 内网部署 (企业环境)"
echo "3) 云端部署 (需要远程访问)"

read -p "请输入选择 (1-3): " choice

case $choice in
  1)
    echo "📱 开始本地打包..."
    npm run build
    npm run dist
    echo "✅ 打包完成！安装包在 release/ 目录"
    ;;
  2)
    echo "🏢 开始内网部署..."
    read -p "请输入服务器IP: " server_ip
    ./deploy-internal.sh $server_ip
    ;;
  3)
    echo "☁️ 开始云端部署..."
    npx vercel --prod
    ;;
  *)
    echo "❌ 无效选择"
    exit 1
    ;;
esac

echo "🎉 部署完成！"
```

## 💡 **总结建议**

基于您的项目是桌面应用的特点，**强烈推荐从方案1开始**：

1. **立即开始**: 使用本地打包方案，成本最低，部署最简单
2. **快速验证**: 1-2天就能打包出可分发的安装包
3. **逐步升级**: 根据使用情况再考虑是否需要更复杂的部署方案

这样既能快速验证产品，又不会在部署环节消耗太多时间和资源！🎯