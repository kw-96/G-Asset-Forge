{"version":3,"file":"suika.a1ff0cb1cc789014d753.js","mappings":"uBAAIA,ECCAC,EADAC,E,sBC+BQC,E,wBAAZ,SAAYA,GACV,kBACA,gBACA,uBACD,CAJD,CAAYA,IAAAA,EAAgB,I,kCC3BrB,MAAMC,EAAb,cACU,KAAAC,OAAuD,IAAIC,GAmGrE,CA9FE,EAAAC,CAAGC,EAAeC,GAKhB,OAJKC,KAAKL,OAAOM,IAAIH,IACnBE,KAAKL,OAAOO,IAAIJ,EAAO,IAEzBE,KAAKL,OAAOQ,IAAIL,GAAQM,KAAKL,GACtBC,IACT,CAKA,IAAAK,CAAKP,EAAeC,GAClB,MAAMO,EAAc,IAAIC,KACtBP,KAAKQ,eAAeV,EAAOQ,GAC3BP,KAAYQ,IAEd,OAAOP,KAAKH,GAAGC,EAAOQ,EACxB,CAKA,IAAAG,CAAKX,KAAkBS,GACrB,MAAMG,EAAYV,KAAKL,OAAOQ,IAAIL,GAClC,SAAKY,GAAkC,IAArBA,EAAUC,SAI5BD,EAAUE,QAAQb,IAChB,IACEA,KAAYQ,EACd,CAAE,MAAOM,GACPC,QAAQD,MAAM,gCAAgCf,MAAWe,EAC3D,IAGK,GACT,CAKA,cAAAL,CAAeV,EAAeC,GAC5B,MAAMW,EAAYV,KAAKL,OAAOQ,IAAIL,GAClC,GAAIY,EAAW,CACb,MAAMK,EAAQL,EAAUM,QAAQjB,IACjB,IAAXgB,GACFL,EAAUO,OAAOF,EAAO,EAE5B,CACA,OAAOf,IACT,CAKA,GAAAkB,CAAIpB,EAAeC,GACjB,OAAOC,KAAKQ,eAAeV,EAAOC,EACpC,CAKA,kBAAAoB,CAAmBrB,GAMjB,OALIA,EACFE,KAAKL,OAAOyB,OAAOtB,GAEnBE,KAAKL,OAAO0B,QAEPrB,IACT,CAKA,aAAAsB,CAAcxB,GACZ,MAAMY,EAAYV,KAAKL,OAAOQ,IAAIL,GAClC,OAAOY,EAAYA,EAAUC,OAAS,CACxC,CAKA,UAAAY,GACE,OAAOC,MAAMC,KAAKzB,KAAKL,OAAO+B,OAChC,CAKA,SAAAhB,CAAUZ,GACR,MAAMY,EAAYV,KAAKL,OAAOQ,IAAIL,GAClC,OAAOY,EAAY,IAAIA,GAAa,EACtC,E,iBCtGF,IAAYiB,E,iBAAZ,SAAYA,GACV,kBACA,wBACA,kBACA,cACA,gBACA,gBACA,cACA,YACA,cACA,cACA,oBACA,aACD,CAbD,CAAYA,IAAAA,EAAQ,I,GCAhBC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CAGAJ,EAAoBO,EAAID,ELzBpB7C,EAAW,GACfuC,EAAoBQ,EAAI,CAACC,EAAQC,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASC,EAAI,EAAGA,EAAItD,EAASqB,OAAQiC,IAAK,CAGzC,IAFA,IAAKL,EAAUC,EAAIC,GAAYnD,EAASsD,GACpCC,GAAY,EACPC,EAAI,EAAGA,EAAIP,EAAS5B,OAAQmC,MACpB,EAAXL,GAAsBC,GAAgBD,IAAaM,OAAOrB,KAAKG,EAAoBQ,GAAGW,MAAOC,GAASpB,EAAoBQ,EAAEY,GAAKV,EAASO,KAC9IP,EAAStB,OAAO6B,IAAK,IAErBD,GAAY,EACTJ,EAAWC,IAAcA,EAAeD,IAG7C,GAAGI,EAAW,CACbvD,EAAS2B,OAAO2B,IAAK,GACrB,IAAIM,EAAIV,SACER,IAANkB,IAAiBZ,EAASY,EAC/B,CACD,CACA,OAAOZ,CAnBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAIG,EAAItD,EAASqB,OAAQiC,EAAI,GAAKtD,EAASsD,EAAI,GAAG,GAAKH,EAAUG,IAAKtD,EAASsD,GAAKtD,EAASsD,EAAI,GACrGtD,EAASsD,GAAK,CAACL,EAAUC,EAAIC,IMJ/BZ,EAAoBsB,EAAKjB,IACxB,IAAIkB,EAASlB,GAAUA,EAAOmB,WAC7B,IAAOnB,EAAiB,QACxB,IAAM,EAEP,OADAL,EAAoByB,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GLNJ5D,EAAWuD,OAAOS,eAAkBC,GAASV,OAAOS,eAAeC,GAASA,GAASA,EAAa,UAQtG5B,EAAoB6B,EAAI,SAASC,EAAOC,GAEvC,GADU,EAAPA,IAAUD,EAAQ3D,KAAK2D,IAChB,EAAPC,EAAU,OAAOD,EACpB,GAAoB,iBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAPC,GAAaD,EAAMN,WAAY,OAAOM,EAC1C,GAAW,GAAPC,GAAoC,mBAAfD,EAAME,KAAqB,OAAOF,CAC5D,CACA,IAAIG,EAAKf,OAAOgB,OAAO,MACvBlC,EAAoBqB,EAAEY,GACtB,IAAIE,EAAM,CAAC,EACXzE,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAIyE,EAAiB,EAAPL,GAAYD,GAA0B,iBAAXM,GAAyC,mBAAXA,MAA4B1E,EAAeyB,QAAQiD,GAAUA,EAAUzE,EAASyE,GAC1JlB,OAAOmB,oBAAoBD,GAASrD,QAASqC,GAASe,EAAIf,GAAO,IAAOU,EAAMV,IAI/E,OAFAe,EAAa,QAAI,IAAM,EACvBnC,EAAoByB,EAAEQ,EAAIE,GACnBF,CACR,EMxBAjC,EAAoByB,EAAI,CAACrB,EAASkC,KACjC,IAAI,IAAIlB,KAAOkB,EACXtC,EAAoBuC,EAAED,EAAYlB,KAASpB,EAAoBuC,EAAEnC,EAASgB,IAC5EF,OAAOsB,eAAepC,EAASgB,EAAK,CAAEqB,YAAY,EAAMnE,IAAKgE,EAAWlB,MCJ3EpB,EAAoBuC,EAAI,CAACX,EAAKc,IAAUxB,OAAOyB,UAAUC,eAAeC,KAAKjB,EAAKc,GCClF1C,EAAoBqB,EAAKjB,IACH,oBAAX0C,QAA0BA,OAAOC,aAC1C7B,OAAOsB,eAAepC,EAAS0C,OAAOC,YAAa,CAAEjB,MAAO,WAE7DZ,OAAOsB,eAAepC,EAAS,aAAc,CAAE0B,OAAO,KCLvD9B,EAAoBiB,EAAI,I,MCKxB,IAAI+B,EAAkB,CACrB,IAAK,EACL,IAAK,GAaNhD,EAAoBQ,EAAES,EAAKgC,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4BC,KACvD,IAGInD,EAAUgD,GAHTvC,EAAU2C,EAAaC,GAAWF,EAGhBrC,EAAI,EAC3B,GAAGL,EAAS6C,KAAMC,GAAgC,IAAxBR,EAAgBQ,IAAa,CACtD,IAAIvD,KAAYoD,EACZrD,EAAoBuC,EAAEc,EAAapD,KACrCD,EAAoBO,EAAEN,GAAYoD,EAAYpD,IAGhD,GAAGqD,EAAS,IAAI7C,EAAS6C,EAAQtD,EAClC,CAEA,IADGmD,GAA4BA,EAA2BC,GACrDrC,EAAIL,EAAS5B,OAAQiC,IACzBkC,EAAUvC,EAASK,GAChBf,EAAoBuC,EAAES,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOjD,EAAoBQ,EAAEC,IAG1BgD,EAAqBC,OAAkC,0BAAIA,OAAkC,2BAAK,GACtGD,EAAmB1E,QAAQmE,EAAqBS,KAAK,KAAM,IAC3DF,EAAmBlF,KAAO2E,EAAqBS,KAAK,KAAMF,EAAmBlF,KAAKoF,KAAKF,G,KCjDvFzD,EAAoB4D,QAAKzD,ECGzB,IAAI0D,EAAsB7D,EAAoBQ,OAAEL,EAAW,CAAC,IAAI,IAAK,IAAOH,EAAoB,OAChG6D,EAAsB7D,EAAoBQ,EAAEqD,E","sources":["webpack://g-asset-forge/webpack/runtime/chunk loaded","webpack://g-asset-forge/webpack/runtime/create fake namespace object","webpack://g-asset-forge/./src/renderer/core/canvas/canvas-manager.ts","webpack://g-asset-forge/./src/renderer/utils/EventEmitter.ts","webpack://g-asset-forge/./src/renderer/core/tools/tool-types.ts","webpack://g-asset-forge/webpack/bootstrap","webpack://g-asset-forge/webpack/runtime/compat get default export","webpack://g-asset-forge/webpack/runtime/define property getters","webpack://g-asset-forge/webpack/runtime/hasOwnProperty shorthand","webpack://g-asset-forge/webpack/runtime/make namespace object","webpack://g-asset-forge/webpack/runtime/runtimeId","webpack://g-asset-forge/webpack/runtime/jsonp chunk loading","webpack://g-asset-forge/webpack/runtime/nonce","webpack://g-asset-forge/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// 画布管理器\r\nimport { TypedEventEmitter } from '../../utils/TypedEventEmitter';\r\nimport type { \r\n  ICanvasConfig, \r\n  ICanvasState, \r\n  ICanvasObject \r\n} from './canvas-types';\r\n// import { EventEmitter } from '../../utils/EventEmitter';\r\n// import { HistoryManager } from '../history/history-manager';\r\nimport { ToolManager } from '../tools/tool-manager';\r\nimport type { ITool, ToolType, IToolConfig, IToolProperties } from '../tools/tool-types';\r\nimport { SuikaCanvasEngine } from '../../engines/suika/suika-canvas-engine';\r\n\r\n// 定义画布引擎接口\r\nexport interface ICanvasEngine {\r\n  type: CanvasEngineType;\r\n  initialize(container: HTMLElement, config: ICanvasConfig): Promise<void>;\r\n  destroy(): void;\r\n  getState(): ICanvasState;\r\n  setState(state: Partial<ICanvasState>): void;\r\n  addObject(object: ICanvasObject): void;\r\n  removeObject(id: string): void;\r\n  updateObject(id: string, updates: Partial<ICanvasObject>): void;\r\n  selectObjects(ids: string[]): void;\r\n  clearSelection(): void;\r\n  zoom(level: number): void;\r\n  pan(x: number, y: number): void;\r\n  render(): void;\r\n  exportImage(format: 'png' | 'jpg', quality?: number): string;\r\n}\r\n\r\nexport enum CanvasEngineType {\r\n  FABRIC = 'fabric',\r\n  SUIKA = 'suika',\r\n  H5_EDITOR = 'h5-editor'\r\n}\r\n\r\nexport interface ICanvasManagerEvents extends Record<string, (...args: any[]) => void> {\r\n  engineSwitched(engine: { type: CanvasEngineType }): void;\r\n  stateChanged(state: ICanvasState): void;\r\n  objectAdded(object: ICanvasObject): void;\r\n  objectRemoved(id: string): void;\r\n  objectUpdated(id: string, updates: Partial<ICanvasObject>): void;\r\n  selectionChanged(ids: string[]): void;\r\n  zoomChanged(level: number): void;\r\n  panChanged(x: number, y: number): void;\r\n  renderComplete(): void;\r\n}\r\n\r\nexport class CanvasManager extends TypedEventEmitter<ICanvasManagerEvents> {\r\n  private engine: ICanvasEngine | null = null;\r\n  private toolManager: ToolManager;\r\n  // TODO: 实现历史管理功能\r\n  // private historyManager: HistoryManager;\r\n  // TODO: 实现事件发射器功能  \r\n  // private eventEmitter = new EventEmitter();\r\n\r\n  constructor() {\r\n    super();\r\n    this.toolManager = new ToolManager();\r\n    // TODO: 实现历史管理功能\r\n    // this.historyManager = new HistoryManager();\r\n  }\r\n\r\n  async initialize(container: HTMLElement, config: ICanvasConfig): Promise<void> {\r\n    // 创建画布引擎\r\n    this.engine = new SuikaCanvasEngine();\r\n    await this.engine.initialize(container, config);\r\n\r\n    // 设置工具适配器\r\n    if (this.engine instanceof SuikaCanvasEngine) {\r\n      const toolAdapter = this.engine.getToolAdapter();\r\n      if (toolAdapter) {\r\n        this.toolManager.setSuikaToolAdapter(toolAdapter);\r\n      }\r\n    }\r\n\r\n    // 设置事件监听\r\n    this.setupEventListeners();\r\n  }\r\n\r\n  private setupEventListeners(): void {\r\n    if (this.engine && 'on' in this.engine) {\r\n      (this.engine as any).on('stateChanged', (state: ICanvasState) => this.emit('stateChanged', state));\r\n      (this.engine as any).on('objectAdded', (object: ICanvasObject) => this.emit('objectAdded', object));\r\n      (this.engine as any).on('objectRemoved', (id: string) => this.emit('objectRemoved', id));\r\n      (this.engine as any).on('objectUpdated', (id: string, updates: Partial<ICanvasObject>) => this.emit('objectUpdated', id, updates));\r\n      (this.engine as any).on('selectionChanged', (ids: string[]) => this.emit('selectionChanged', ids));\r\n      (this.engine as any).on('zoomChanged', (level: number) => this.emit('zoomChanged', level));\r\n      (this.engine as any).on('panChanged', (x: number, y: number) => this.emit('panChanged', x, y));\r\n      (this.engine as any).on('renderComplete', () => this.emit('renderComplete'));\r\n    }\r\n  }\r\n\r\n  async switchEngine(engineType: CanvasEngineType, container: HTMLElement, config: ICanvasConfig): Promise<void> {\r\n    // 销毁当前引擎\r\n    if (this.engine) {\r\n      this.engine.destroy();\r\n    }\r\n\r\n    // 创建新引擎\r\n    let engine: ICanvasEngine;\r\n    switch (engineType) {\r\n      case CanvasEngineType.SUIKA:\r\n        engine = new SuikaCanvasEngine();\r\n        break;\r\n      default:\r\n        throw new Error(`Unsupported engine type: ${engineType}`);\r\n    }\r\n\r\n    await engine.initialize(container, config);\r\n    \r\n    this.engine = engine;\r\n    this.emit('engineSwitched', { type: engineType });\r\n  }\r\n\r\n  getCurrentEngine(): ICanvasEngine | null {\r\n    return this.engine;\r\n  }\r\n\r\n  getEngineType(): CanvasEngineType | null {\r\n    return this.engine?.type || null;\r\n  }\r\n\r\n  // 代理方法到当前引擎\r\n  getState(): ICanvasState | null {\r\n    return this.engine?.getState() || null;\r\n  }\r\n\r\n  setState(state: Partial<ICanvasState>): void {\r\n    this.engine?.setState(state);\r\n  }\r\n\r\n  addObject(object: ICanvasObject): void {\r\n    this.engine?.addObject(object);\r\n  }\r\n\r\n  removeObject(id: string): void {\r\n    this.engine?.removeObject(id);\r\n  }\r\n\r\n  updateObject(id: string, updates: Partial<ICanvasObject>): void {\r\n    this.engine?.updateObject(id, updates);\r\n  }\r\n\r\n  selectObjects(ids: string[]): void {\r\n    this.engine?.selectObjects(ids);\r\n  }\r\n\r\n  clearSelection(): void {\r\n    this.engine?.clearSelection();\r\n  }\r\n\r\n  zoom(level: number): void {\r\n    this.engine?.zoom(level);\r\n  }\r\n\r\n  pan(x: number, y: number): void {\r\n    this.engine?.pan(x, y);\r\n  }\r\n\r\n  render(): void {\r\n    this.engine?.render();\r\n  }\r\n\r\n  exportImage(format: 'png' | 'jpg' = 'png', quality: number = 1): string | null {\r\n    return this.engine?.exportImage(format, quality) || null;\r\n  }\r\n\r\n  // 工具系统方法\r\n  activateTool(type: ToolType): boolean {\r\n    return this.toolManager.activateTool(type);\r\n  }\r\n\r\n  getActiveTool(): ITool | null {\r\n    return this.toolManager.getActiveTool();\r\n  }\r\n\r\n  getActiveToolType(): ToolType | null {\r\n    return this.toolManager.getActiveToolType();\r\n  }\r\n\r\n  getAllToolConfigs(): IToolConfig[] {\r\n    return this.toolManager.getToolConfigs();\r\n  }\r\n\r\n  getToolConfig(type: ToolType): IToolConfig | undefined {\r\n    return this.toolManager.getToolConfigs().find((config: IToolConfig) => config.type === type);\r\n  }\r\n\r\n  setToolProperties(properties: Partial<IToolProperties>): void {\r\n    this.toolManager.setProperties(properties);\r\n  }\r\n\r\n  getToolProperties(): IToolProperties {\r\n    return this.toolManager.getProperties();\r\n  }\r\n\r\n  // 事件处理方法\r\n  handleMouseDown(event: MouseEvent): void {\r\n    this.toolManager.handleMouseDown(event);\r\n  }\r\n\r\n  handleMouseMove(event: MouseEvent): void {\r\n    this.toolManager.handleMouseMove(event);\r\n  }\r\n\r\n  handleMouseUp(event: MouseEvent): void {\r\n    this.toolManager.handleMouseUp(event);\r\n  }\r\n\r\n  handleKeyDown(event: KeyboardEvent): void {\r\n    this.toolManager.handleKeyDown(event);\r\n  }\r\n\r\n  handleKeyUp(event: KeyboardEvent): void {\r\n    this.toolManager.handleKeyUp(event);\r\n  }\r\n\r\n  destroy(): void {\r\n    if (this.engine) {\r\n      this.engine.destroy();\r\n      this.engine = null;\r\n    }\r\n    // 注意：ToolManager和HistoryManager没有destroy方法，需要检查\r\n  }\r\n}","/**\r\n * Browser-compatible EventEmitter implementation\r\n * Provides Node.js-like EventEmitter functionality in the browser\r\n */\r\nexport class EventEmitter {\r\n  private events: Map<string, Array<(...args: any[]) => void>> = new Map();\r\n\r\n  /**\r\n   * Add an event listener\r\n   */\r\n  on(event: string, listener: (...args: any[]) => void): this {\r\n    if (!this.events.has(event)) {\r\n      this.events.set(event, []);\r\n    }\r\n    this.events.get(event)!.push(listener);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a one-time event listener\r\n   */\r\n  once(event: string, listener: (...args: any[]) => void): this {\r\n    const onceWrapper = (...args: any[]) => {\r\n      this.removeListener(event, onceWrapper);\r\n      listener(...args);\r\n    };\r\n    return this.on(event, onceWrapper);\r\n  }\r\n\r\n  /**\r\n   * Emit an event\r\n   */\r\n  emit(event: string, ...args: any[]): boolean {\r\n    const listeners = this.events.get(event);\r\n    if (!listeners || listeners.length === 0) {\r\n      return false;\r\n    }\r\n    \r\n    listeners.forEach(listener => {\r\n      try {\r\n        listener(...args);\r\n      } catch (error) {\r\n        console.error(`Error in event listener for \"${event}\":`, error);\r\n      }\r\n    });\r\n    \r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Remove a specific event listener\r\n   */\r\n  removeListener(event: string, listener: (...args: any[]) => void): this {\r\n    const listeners = this.events.get(event);\r\n    if (listeners) {\r\n      const index = listeners.indexOf(listener);\r\n      if (index !== -1) {\r\n        listeners.splice(index, 1);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Alias for removeListener\r\n   */\r\n  off(event: string, listener: (...args: any[]) => void): this {\r\n    return this.removeListener(event, listener);\r\n  }\r\n\r\n  /**\r\n   * Remove all listeners for an event, or all listeners for all events\r\n   */\r\n  removeAllListeners(event?: string): this {\r\n    if (event) {\r\n      this.events.delete(event);\r\n    } else {\r\n      this.events.clear();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the number of listeners for an event\r\n   */\r\n  listenerCount(event: string): number {\r\n    const listeners = this.events.get(event);\r\n    return listeners ? listeners.length : 0;\r\n  }\r\n\r\n  /**\r\n   * Get all event names that have listeners\r\n   */\r\n  eventNames(): string[] {\r\n    return Array.from(this.events.keys());\r\n  }\r\n\r\n  /**\r\n   * Get all listeners for an event\r\n   */\r\n  listeners(event: string): Array<(...args: any[]) => void> {\r\n    const listeners = this.events.get(event);\r\n    return listeners ? [...listeners] : [];\r\n  }\r\n}","// 工具系统类型定义\r\nexport enum ToolType {\r\n  SELECT = 'select',\r\n  RECTANGLE = 'rectangle',\r\n  CIRCLE = 'circle',\r\n  TEXT = 'text',\r\n  IMAGE = 'image',\r\n  BRUSH = 'brush',\r\n  CROP = 'crop',\r\n  PAN = 'pan',\r\n  ZOOM = 'zoom',\r\n  LINE = 'line',\r\n  POLYGON = 'polygon',\r\n  STAR = 'star'\r\n}\r\n\r\nexport interface IToolConfig {\r\n  type: ToolType;\r\n  name: string;\r\n  icon: string;\r\n  shortcut?: string;\r\n  cursor?: string;\r\n}\r\n\r\nexport interface IToolState {\r\n  isActive: boolean;\r\n  isDragging: boolean;\r\n  startPoint?: { x: number; y: number } | undefined;\r\n  currentPoint?: { x: number; y: number } | undefined;\r\n  properties: Record<string, any>;\r\n}\r\n\r\nexport interface ITool {\r\n  type: ToolType;\r\n  config: IToolConfig;\r\n  state: IToolState;\r\n  \r\n  activate(): void;\r\n  deactivate(): void;\r\n  onMouseDown(event: MouseEvent): void;\r\n  onMouseMove(event: MouseEvent): void;\r\n  onMouseUp(event: MouseEvent): void;\r\n  onKeyDown(event: KeyboardEvent): void;\r\n  onKeyUp(event: KeyboardEvent): void;\r\n  render?(ctx: CanvasRenderingContext2D): void;\r\n}\r\n\r\nexport interface IToolProperties {\r\n  // 通用属性\r\n  fill?: string;\r\n  stroke?: string;\r\n  strokeWidth?: number;\r\n  opacity?: number;\r\n  \r\n  // 文本属性\r\n  fontSize?: number;\r\n  fontFamily?: string;\r\n  fontWeight?: string;\r\n  textAlign?: 'left' | 'center' | 'right';\r\n  \r\n  // 画笔属性\r\n  brushSize?: number;\r\n  brushOpacity?: number;\r\n  brushHardness?: number;\r\n  \r\n  // 形状属性\r\n  cornerRadius?: number;\r\n  \r\n  // 图片属性\r\n  imageFilter?: string;\r\n  \r\n  // 索引签名\r\n  [key: string]: any;\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 868;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t580: 0,\n\t868: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = global[\"webpackChunkg_asset_forge\"] = global[\"webpackChunkg_asset_forge\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [592,96], () => (__webpack_require__(3324)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","CanvasEngineType","EventEmitter","events","Map","on","event","listener","this","has","set","get","push","once","onceWrapper","args","removeListener","emit","listeners","length","forEach","error","console","index","indexOf","splice","off","removeAllListeners","delete","clear","listenerCount","eventNames","Array","from","keys","ToolType","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","every","key","r","n","getter","__esModule","d","a","getPrototypeOf","obj","t","value","mode","then","ns","create","def","current","getOwnPropertyNames","definition","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","id","chunkLoadingGlobal","global","bind","nc","__webpack_exports__"],"sourceRoot":""}